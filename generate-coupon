$u=App\Models\User::where('email','kiran@electricsheepagency.co.za')->firstOrFail(); $acc=App\Models\LoyaltyAccount::firstOrCreate(['user_id'=>$u->id]); $type=App\Models\LoyaltyRewardType::firstOrCreate(['name'=>'Free Sauna'],['points_cost'=>config('loyalty.points_per_reward',10),'payload'=>['covers'=>'1-seat'],'active'=>true]); $code=strtr(strtoupper(Illuminate\Support\Str::random(10)),['O'=>'X','0'=>'Z','I'=>'Y','1'=>'W','L'=>'M']); App\Models\LoyaltyReward::create(['account_id'=>$acc->id,'reward_type_id'=>$type->id,'code'=>$code,'status'=>App\Models\LoyaltyReward::STATUS_ISSUED,'issued_points'=>10,'issued_at'=>now(),'expires_at'=>null]); $code